<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yætzy</title>
    <style>
        .seksjon1 {
            display: grid;
            grid-gap: 3px;
            grid-template-columns: repeat(5, 80px);
        }

        .seksjon2 {
            display: grid;
            grid-gap: 0px;
            grid-template-columns: 2fr repeat(4, 1fr);
        }

        div {
            border: 1px solid rgb(79, 79, 79);

        }

        .sentrering {
            display: grid;
            place-content: center;
        }

        .terningsvar {
            text-align: center;
            margin-bottom: 2vw;
        }

        .knappene {
            display: flex;
            justify-content: center;
            margin: 5vh 1vw 2vh;
        }

        #reglene {
            border: 2px navy solid;
            padding: 10px;
            position: absolute;
            top: 180px;
            left: 180px;
        }

        #ikkejukks {
            border: 3px red solid;
            padding: 10px;
            position: absolute;
            left: 980px;
            top: 180px;
            font-size: 30px;
            font-weight: 900;
            max-width: 300px;
        }

        .rad7,
        .rad18 {
            font-weight: 900;
        }
    </style>
</head>

<body>
    <nav class="knappene">
        <button id="hvemspiller">Hvem spiller?</button>
        <button id="terningen">Kast terningene</button>
        <!--  <button id="ferdigkastet">Ferdig!</button>  -->
    </nav>

    <main class="sentrering">
        <section class="seksjon1">
            <div class="terningsvar" onclick="riktigKast(1)"></div>
            <div class="terningsvar" onclick="riktigKast(2)"></div>
            <div class="terningsvar" onclick="riktigKast(3)"></div>
            <div class="terningsvar" onclick="riktigKast(4)"></div>
            <div class="terningsvar" onclick="riktigKast(5)"></div>
        </section>

        <section class="seksjon2">
            <div><b>Deltagere</b></div>
            <div id="deltager1"></div>
            <div id="deltager2"></div>
            <div id="deltager3"></div>
            <div id="deltager4"></div>
            <div>Enere</div>
            <div class="kolonne1 rad1" onclick="sumEnTilSeks(1, 1)"></div>
            <div class="kolonne2 rad1" onclick="sumEnTilSeks(1, 2)"></div>
            <div class="kolonne3 rad1" onclick="sumEnTilSeks(1, 3)"></div>
            <div class="kolonne4 rad1" onclick="sumEnTilSeks(1, 4)"></div>
            <div>Toere</div>
            <div class="kolonne1 rad2" onclick="sumEnTilSeks(2, 1)"></div>
            <div class="kolonne2 rad2" onclick="sumEnTilSeks(2, 2)"></div>
            <div class="kolonne3 rad2" onclick="sumEnTilSeks(2, 3)"></div>
            <div class="kolonne4 rad2" onclick="sumEnTilSeks(2, 4)"></div>
            <div>Treere</div>
            <div class="kolonne1 rad3" onclick="sumEnTilSeks(3, 1)"></div>
            <div class="kolonne2 rad3" onclick="sumEnTilSeks(3, 2)"></div>
            <div class="kolonne3 rad3" onclick="sumEnTilSeks(3, 3)"></div>
            <div class="kolonne4 rad3" onclick="sumEnTilSeks(3, 4)"></div>
            <div>Firere</div>
            <div class="kolonne1 rad4" onclick="sumEnTilSeks(4, 1)"></div>
            <div class="kolonne2 rad4" onclick="sumEnTilSeks(4, 2)"></div>
            <div class="kolonne3 rad4" onclick="sumEnTilSeks(4, 3)"></div>
            <div class="kolonne4 rad4" onclick="sumEnTilSeks(4, 4)"></div>
            <div>Femmere</div>
            <div class="kolonne1 rad5" onclick="sumEnTilSeks(5, 1)"></div>
            <div class="kolonne2 rad5" onclick="sumEnTilSeks(5, 2)"></div>
            <div class="kolonne3 rad5" onclick="sumEnTilSeks(5, 3)"></div>
            <div class="kolonne4 rad5" onclick="sumEnTilSeks(5, 4)"></div>
            <div>Seksere</div>
            <div class="kolonne1 rad6" onclick="sumEnTilSeks(6, 1)"></div>
            <div class="kolonne2 rad6" onclick="sumEnTilSeks(6, 2)"></div>
            <div class="kolonne3 rad6" onclick="sumEnTilSeks(6, 3)"></div>
            <div class="kolonne4 rad6" onclick="sumEnTilSeks(6, 4)"></div>
            <div><b>Sum</b></div>
            <div class="kolonne1 rad7" onclick="forsteSum(7, 1)"></div>
            <div class="kolonne2 rad7" onclick="forsteSum(7, 2)"></div>
            <div class="kolonne3 rad7" onclick="forsteSum(7, 3)"></div>
            <div class="kolonne4 rad7" onclick="forsteSum(7, 4)"></div>
            <div><b>Bonus</b></div>
            <div class="kolonne1 rad8"></div>
            <div class="kolonne2 rad8"></div>
            <div class="kolonne3 rad8"></div>
            <div class="kolonne4 rad8"></div>
            <div>Ett par</div>
            <div class="kolonne1 rad9" onclick="sumPar(9, 1, 1)"></div>
            <div class="kolonne2 rad9" onclick="sumPar(9, 2, 1)"></div>
            <div class="kolonne3 rad9" onclick="sumPar(9, 3, 1)"></div>
            <div class="kolonne4 rad9" onclick="sumPar(9, 4, 1)"></div>
            <div>To par</div>
            <div class="kolonne1 rad10" onclick="sumPar(10, 1, 2)"></div>
            <div class="kolonne2 rad10" onclick="sumPar(10, 2, 2)"></div>
            <div class="kolonne3 rad10" onclick="sumPar(10, 3, 2)"></div>
            <div class="kolonne4 rad10" onclick="sumPar(10, 4, 2)"></div>
            <div>Tre like</div>
            <div class="kolonne1 rad11" onclick="antallLike(11, 1, 3)"></div>
            <div class="kolonne2 rad11" onclick="antallLike(11, 2, 3)"></div>
            <div class="kolonne3 rad11" onclick="antallLike(11, 3, 3)"></div>
            <div class="kolonne4 rad11" onclick="antallLike(11, 4, 3)"></div>
            <div>Fire like</div>
            <div class="kolonne1 rad12" onclick="antallLike(12, 1, 4)"></div>
            <div class="kolonne2 rad12" onclick="antallLike(12, 2, 4)"></div>
            <div class="kolonne3 rad12" onclick="antallLike(12, 3, 4)"></div>
            <div class="kolonne4 rad12" onclick="antallLike(12, 4, 4)"></div>
            <div>Liten straight</div>
            <div class="kolonne1 rad13" onclick="litenStorStraight(13, 1, 1)"></div>
            <div class="kolonne2 rad13" onclick="litenStorStraight(13, 2, 1)"></div>
            <div class="kolonne3 rad13" onclick="litenStorStraight(13, 3, 1)"></div>
            <div class="kolonne4 rad13" onclick="litenStorStraight(13, 4, 1)"></div>
            <div>Stor straight</div>
            <div class="kolonne1 rad14" onclick="litenStorStraight(14, 1, 2)"></div>
            <div class="kolonne2 rad14" onclick="litenStorStraight(14, 2, 2)"></div>
            <div class="kolonne3 rad14" onclick="litenStorStraight(14, 3, 2)"></div>
            <div class="kolonne4 rad14" onclick="litenStorStraight(14, 4, 2)"></div>
            <div>Hus</div>
            <div class="kolonne1 rad15"></div>
            <div class="kolonne2 rad15"></div>
            <div class="kolonne3 rad15"></div>
            <div class="kolonne4 rad15"></div>
            <div>Sjanse</div>
            <div class="kolonne1 rad16" onclick="sjanse(16, 1)"></div>
            <div class="kolonne2 rad16" onclick="sjanse(16, 2)"></div>
            <div class="kolonne3 rad16" onclick="sjanse(16, 3)"></div>
            <div class="kolonne4 rad16" onclick="sjanse(16, 4)"></div>
            <div>Yatzy</div>
            <div class="kolonne1 rad17" onclick="antallLike(17, 1, 5)"></div>
            <div class="kolonne2 rad17" onclick="antallLike(17, 2, 5)"></div>
            <div class="kolonne3 rad17" onclick="antallLike(17, 3, 5)"></div>
            <div class="kolonne4 rad17" onclick="antallLike(17, 4, 5)"></div>
            <div><b>Totalt</b></div>
            <div class="kolonne1 rad18" onclick="totSum(18, 1)"></div>
            <div class="kolonne2 rad18" onclick="totSum(18, 2)"></div>
            <div class="kolonne3 rad18" onclick="totSum(18, 3)"></div>
            <div class="kolonne4 rad18" onclick="totSum(18, 4)"></div>
        </section>
    </main>

    <div id="reglene">
        <h2>Slik spiller du Yatzy 🎲</h2>
        <li>Trykk på hvem spiller for å starte</li>
        <li>Kast terningene</li>
        <li>Behold verdier ved å trykke på den</li>
        <li>Plasser de i ruten du ønsker</li>
        <li>Velg en rute selv om du får 0 poeng</li>
        <li>Maks tre kast per runde</li>
        <li>Bonus ved 63 eller fler poeng</li>
    </div>

    <div id="ikkejukks">
        <p id="feilmelding"> Og husk, ingen juksing </p>
    </div>

    <script>
        var terningen = document.getElementById("terningen"); /*Kaster terninger*/
        var hvemSpiller = document.getElementById("hvemspiller"); /*Angir hvor mange og hvem som spiller*/

        var feilMelding = document.getElementById("feilmelding");

        var terningSvar = document.getElementsByClassName("terningsvar"); /*Klassen til terningene*/

        const seksjonArray = [
            document.getElementsByClassName("rad1"), //0
            document.getElementsByClassName("rad2"), //1 
            document.getElementsByClassName("rad3"), //2
            document.getElementsByClassName("rad4"), //3
            document.getElementsByClassName("rad5"), //4
            document.getElementsByClassName("rad6"), //5
            document.getElementsByClassName("rad7"), //6
            document.getElementsByClassName("rad8"),
            document.getElementsByClassName("rad9"),
            document.getElementsByClassName("rad10"),
            document.getElementsByClassName("rad11"),
            document.getElementsByClassName("rad12"),
            document.getElementsByClassName("rad13"),
            document.getElementsByClassName("rad14"),
            document.getElementsByClassName("rad15"),
            document.getElementsByClassName("rad16"),
            document.getElementsByClassName("rad17"),
            document.getElementsByClassName("rad18"),
        ]

        var kolonne1 = document.getElementsByClassName("kolonne1"); //Klassen til kollonene
        var kolonne2 = document.getElementsByClassName("kolonne2");
        var kolonne3 = document.getElementsByClassName("kolonne3");
        var kolonne4 = document.getElementsByClassName("kolonne4");

        //Hvor mange og hvem spiller?
        function hvemHvorSpiller() {
            var spiller1 = prompt("Navn på spiller nr.1?")
            document.getElementById("deltager1").innerHTML = spiller1.substring(0, 2);
            var spiller2 = prompt("nr.2?")
            document.getElementById("deltager2").innerHTML = spiller2.substring(0, 2);
            var spiller3 = prompt("nr.3?")
            document.getElementById("deltager3").innerHTML = spiller3.substring(0, 2);
            var spiller4 = prompt("og siste mann?")
            document.getElementById("deltager4").innerHTML = spiller4.substring(0, 2);

            for (let j = 0; j < kolonne1.length; j++) {
                kolonne1[j].style.backgroundColor = "rgb(229, 227, 227)";
            }
        }
        hvemSpiller.onclick = hvemHvorSpiller;




        //Kaster terning
        function terningReturn() {
            return Math.floor((Math.random() * 6) + 1);
        }
        function kast() {
            for (let i = 0; i < terningSvar.length; i++) {
                if (terningSvar[i].style.backgroundColor != "green") {
                    terningSvar[i].innerHTML = terningReturn();
                }
            }
        }
        terningen.onclick = kast;


        //Det som gjør grønn terning, her defineres fargen på terningen
        for (let i = 0; i < terningSvar.length; i++)
            terningSvar[i].style.backgroundColor = "white";

        function riktigKast(terningNr) {
            if (terningSvar[terningNr - 1].style.backgroundColor == "white") {
                terningSvar[terningNr - 1].style.backgroundColor = "green";
            }

            else if (terningSvar[terningNr - 1].style.backgroundColor == "green") {
                terningSvar[terningNr - 1].style.backgroundColor = "white";
            }
        }

        function sumEnTilSeks(radNummer, kolonneNummer) {
            resultat = 0;
            antallGronne = 0;
            for (let i = 0; i < terningSvar.length; i++) {
                if (terningSvar[i].style.backgroundColor == "green") {
                    resultat += Number(terningSvar[i].innerHTML)
                    antallGronne++;
                }
                terningSvar[i].style.backgroundColor = "white";
            }
            if (resultat / antallGronne == radNummer || resultat == 0) {
                seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = resultat;
            }
            else {                      //if (resultat / antallGronne != radNummer) 
                feilMelding.innerHTML = "Juksing er ikke kult, velg riktige tall"
                setTimeout(function () {
                    feilMelding.innerText = 'Husk ingen juksing';
                }, 3000);
            }
        }

        function forsteSum(radNummer, kolonneNummer) {
            sum = 0
            for (let i = 0; i < 7; i++) {
                sum += Number(seksjonArray[i][kolonneNummer - 1].innerHTML);
            }
            seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = sum;
            if (sum >= 63) {
                seksjonArray[radNummer][kolonneNummer - 1].innerHTML = 50;
            }
        }

        function sumPar(radNummer, kolonneNummer, antallPar) {
            resultat = 0;
            for (let i = 0; i < terningSvar.length; i++) {
                if (terningSvar[i].style.backgroundColor == "green") {
                    resultat = resultat + Number(terningSvar[i].innerHTML);
                }
                terningSvar[i].style.backgroundColor = "white";
            }

            /* else {
                 feilMelding.innerHTML = "ikke juks, velg par"
                 setTimeout(function () {
                     feilMelding.innerText = 'Husk ingen juksing';
                 }, 3000);
             }*/
        }

        function antallLike(radNummer, kolonneNummer, sumLike) {
            resultat = 0;
            antallGronne = 0;
            for (let i = 0; i < terningSvar.length; i++) { //LAGER RETURN VERDI FOR TERNINGSVAR[I] SÅ SLIPPER MAN LØKKKEN HELE TIDEN
                if (terningSvar[i].style.backgroundColor == "green") {
                    resultat += Number(terningSvar[i].innerHTML)
                    antallGronne++;
                }
                terningSvar[i].style.backgroundColor = "white";
            }

            for (let i = 0; i < terningSvar.length; i++) {
                if (antallGronne == sumLike || resultat == 0) {
                    if (resultat / sumLike == Number(terningSvar[i].innerHTML) || resultat == 0) {
                        if (sumLike == 5 && antallGronne == 5) {
                            resultat = 50;
                        }
                        seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = resultat;
                    }
                }
                else {
                    feilMelding.innerHTML = "Du prøver og jukse igjen"
                    setTimeout(function () {
                        feilMelding.innerText = 'Husk ingen juksing';
                    }, 3000);
                }
            }

        }



        function litenStorStraight(radNummer, kolonneNummer, StorLiten) {
            const svarArray = []
            for (let i = 0; i < terningSvar.length; i++) {
                if (terningSvar[i].style.backgroundColor == "green") {
                    svarArray.unshift(Number(terningSvar[i].innerHTML));
                }
            }
            if (StorLiten == 1) {
                if (svarArray == 0) {
                    seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = 0;
                }
                if (svarArray.includes(1, 2, 3, 4, 5)) {
                    seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = 15;
                }
                else {
                    feilMelding.innerHTML = "Dette går ikke"
                    setTimeout(function () {
                        feilMelding.innerText = 'Husk ingen juksing';
                    }, 3000);
                }
            }
            if (StorLiten == 2) {
                if (svarArray == 0) {
                    seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = 0;
                }
                if (svarArray.includes(2, 3, 4, 5, 6)) {
                    seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = 20;
                }
                else {
                    feilMelding.innerHTML = "Ikke gjør sånn"
                    setTimeout(function () {
                        feilMelding.innerText = 'Husk ingen juksing';
                    }, 3000);
                }
            }
            for (let i = 0; i < terningSvar.length; i++) {
                terningSvar[i].style.backgroundColor = "white";
            }
        }

        function sjanse(radNummer, kolonneNummer) {
            resultat = 0;
            for (let i = 0; i < terningSvar.length; i++) {
                if (terningSvar[i].style.backgroundColor == "green") {
                    resultat += Number(terningSvar[i].innerHTML)
                }
            }
            seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = resultat
        }

        function totSum(radNummer, kolonneNummer) {
            sum = 0
            for (let i = 6; i < 17; i++) {
                sum += Number(seksjonArray[i][kolonneNummer - 1].innerHTML);
            }
            seksjonArray[radNummer - 1][kolonneNummer - 1].innerHTML = sum;
        }

    </script>
</body>

</html>